<div hx-get="/ui/fragments/callbacks-table?page={{ page }}" hx-trigger="every 3s" hx-swap="outerHTML">
{% if callbacks %}
<table>
    <thead>
        <tr>
            <th>Message SID</th>
            <th>Message Status</th>
            <th>HTTP Code</th>
            <th>Attempt</th>
            <th>Created</th>
        </tr>
    </thead>
    <tbody>
        {% for callback in callbacks %}
        <tr style="cursor: pointer;" hx-get="/ui/fragments/callback-detail/{{ callback.id }}" hx-target="#modal-content" hx-swap="innerHTML" onclick="openModal()">
            <td>
                {% if callback.message_sid or callback.call_sid %}
                    <code>{{ (callback.message_sid or callback.call_sid)[:20] }}...</code>
                {% else %}
                    -
                {% endif %}
            </td>
            <td>
                {% if callback.message_status or callback.call_status %}
                    {{ callback.message_status or callback.call_status }}
                {% else %}
                    -
                {% endif %}
            </td>
            <td>
                {% if callback.status_code %}
                    <span class="status {% if callback.status_code >= 200 and callback.status_code < 300 %}delivered{% else %}failed{% endif %}">
                        {{ callback.status_code }}
                    </span>
                {% else %}
                    <span class="status failed">Error</span>
                {% endif %}
            </td>
            <td>{{ callback.attempt_number }}</td>
            <td class="timestamp">{{ callback.created_at }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% include "fragments/pagination.html" %}
{% else %}
<div class="empty-state">
    <p>No callback logs found.</p>
    <p style="margin-top: 10px; font-size: 14px;">Callback logs will appear here when callbacks are sent.</p>
</div>
{% endif %}
</div>
